# SnippetNews – отображение новостных карточек с дубликатами  

## Описание проекта

Реализация компонента **отображения блока новости** на React + Ant Design. Компонент отображает новость с ключевой информацией, блоком подсвеченных фрагментов текста (*highlights*), ключевыми словами и системой управления дубликатами.

---

## Технологии

- **React** (CRA)
- **TypeScript**
- **Ant Design** (библиотека UI-компонентов)
- **CSS** для стилизации

---

## Структура проекта

- **src/App.tsx** — создание тестовых данных, группировка новостей по оригиналу и передача в компонент `SnippetNews`.
- **src/components/SnippetNews.tsx** — главный компонент отображения одной карточки новости и её дубликатов.
- **src/types.ts** — описание интерфейсов данных (`IData_SnippetNews` и связанные).

---

## Обработка и форматирование данных

Перед отрисовкой данные проходят дополнительную обработку:

- **Форматирование даты публикации**:  
  Используется `toLocaleString('en-GB')` для приведения даты к формату `день месяц год`.

- **Форматирование охвата аудитории (Reach)**:  
  Значение в зависимости от размера переводится в `K`, `M` или `B`:
  ```tsx
  if (value >= 1e9) return `${v}B `;
  if (value >= 1e6) return `${v}M `;
  if (value >= 1e3) return `${v}K `;
  return `${value} `;
  ```

- **Форматирование данных трафика**:  
    Каждая страна и её трафик переводятся в проценты и отображаются с разделением цвета

- **Фильтрация ключевых слов**:  
    Отображаются только первые 5 ключевых слов. Кнопка **Show all** позволяет показать все теги.

- **Обработка дубликатов**:
    - Используется `Set<number>`, чтобы отслеживать, какие карточки дубликатов развернуты (`openDupIds`).
    - Функция `toggleDup(id)` позволяет по клику на превью карточки раскрывать или закрывать содержимое.

---

## Функциональные особенности

- **Разделение оригинала и дубликатов**:
    - Группировка происходит по заголовку (`TI`).
    - Оригиналом считается запись с минимальным `ID`.
    - Все новости с одинаковым заголовком (`TI`) объединяются в одну группу.
    - В оригинальной карточке отображается общее количество дубликатов, которые можно раскрыть.
    - Раскрытие списка дубликатов происходит через кнопку **View/Hide Duplicates**.

- **Раскрытие текста дубликатов**:
    - При нажатии на превью карточки дубликата — открывается полный текст:
    - Показ подсвеченных фрагментов (_highlights_)
    - Показ полного текста новости (_abstract_)
    - Отображение ключевых слов (_keywords_)
    - Клик на "Show more" / "Show less" внутри карточки обрабатывается отдельно и не влияет на сворачивание всей карточки дубликата.

- **Адаптивное отображение ключевых слов**:
    - Сначала показываются 5 тегов, остальное раскрывается по клику.

- **UI/UX**:
    - Добавление иконок и элементов через Ant Design.

---

## Как запустить проект

```bash
npm install
npm start
```

Проект откроется по адресу [http://localhost:3000](http://localhost:3000)

---

## Скриншоты

![Скриншот](\img\1.jpg)
![Скриншот](\img\2.jpg)

---
